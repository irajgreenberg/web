<!DOCTYPE html>
<html>

<head>

<meta charset="utf-8">
<title>Exploring SVG shape primitives in D3</title>

<style>

body {
	background-color: #aaaaaa;
}

</style>
</head>

<body>

<!-- link to d3 lib-->
<script src="//d3js.org/d3.v3.min.js"></script>

<!-- JS and d3 code between script tags-->
<script>

// add svg element to body and 
// use chaining syntax to set attributes.
// This is the d3 way!
var w = 1000, h = 400;
var svg = d3.select("body").append("svg")
			.attr("width", w)
			.attr("height", h)
			.attr("border", "1px solid");


//1.
// data for arc chart
var annualBudget = {
	auto:7500, 
	home: 20000, 
	food:15000,
	utilities:6200, 
	entertainment:3600, 
	tution: 35000, 
	medical:4500, 
	pets:2000  
 };
  
function getAngs(){
	var total = 0;
	for(var index in annualBudget){
		total += annualBudget[index];
	}
	var starts = [];
	starts.push(0);
	var ends = []
	var totalAng = 0;
	for(var index in annualBudget){
		var val = annualBudget[index]/total*(Math.PI*2);
		starts.push(val);
		totalAng += val;
		ends.push(totalAng);
	}
	console.log(starts);
	return [starts, ends];
}

// var angScale = d3.scale.linear()
// 	.domain([d3.min(d3.values(annualBudget)), d3.max(d3.values(annualBudget))])
// 	.range([-Math.PI/2, Math.PI/2]);


var arc = d3.svg.arc()
		.innerRadius(40)
		.outerRadius(100)
	    .startAngle(function(d, i){return d[0];})
	    .endAngle(function(d, i){return d[1];});

svg.selectAll("path")
		.data(getAngs())
		.enter().append("path")
		.style("fill", "#5577ff")
		.attr("d", arc)
		.attr("transform", "translate(100, 100)");




// add shape primitives to svg container
//1.
// Area chart
// generate some curve data along x-axis
data = []; // clear current data
ptCount = 100;
var theta = 0.0;
for(var i=0; i<ptCount; i++){
	data.push({"x" : 200/ptCount*i, "y" : Math.cos(theta += Math.PI/16)*30});
}
var area = d3.svg.area()
	.x(function(d) { return d.x; })
	.y0(100)
	.y1(function(d) { return d.y; });

svg.append("path")
	.datum(data)
	.attr("d", area)
	.attr("fill", "hotpink")
	.attr("transform", "translate(800.0, 300)");

//11.
// Final Decoration
// add pretty boxes around all examples;
var offsets = [[0,0]];
var cols = 5, rows = 2;
var sz = 200;
for(var i=0; i<cols; i++){
	for(var j=0; j<rows; j++){
		offsets.push([i*sz, j*sz]);
	}
}

svg.selectAll("rect")
    .data(offsets)
    .enter()
    .append("rect")
	.attr("height", 200)
	.attr("width", 200)
	.style("stroke", "gray")
	.style("fill", "none")
	.style("stroke-width", 2)
	.attr('transform', translate);

function translate(d) {
		return "translate("+d[0]+", "+d[1]+")"
}

</script>

</body>
</html>