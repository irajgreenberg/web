<!DOCTYPE html>
<html>

<head>

<meta charset="utf-8">
<title>Exploring SVG shape primitives in D3</title>

<style>

body {
	background-color: #aaaaaa;
}

</style>
</head>

<body>

<!-- link to d3 lib-->
<script src="//d3js.org/d3.v3.min.js"></script>

<!-- JS and d3 code between script tags-->
<script>


// data for pie chart examples
var annualBudget = [
	{"category":"auto", "amount":7500, "colorCode":"#776622"}, 
	{"category":"home", "amount":20000, "colorCode":"#ffaa22"},
	{"category":"food", "amount":15000, "colorCode":"#aa00bb"},
	{"category":"utilities", "amount":6200, "colorCode":"#3344cc"},
	{"category":"entertainment", "amount":3600, "colorCode":"#ff2288"},
	{"category":"tution", "amount":35000, "colorCode":"#006622"},
	{"category":"medical", "amount":4500, "colorCode":"#6688ff"},
	{"category":"pets", "amount":2000, "colorCode":"#222233"}
 ];

var randCol = d3.scale.category20c();


// set up svg
var w = 1000, h = 400;
var svg = d3.select("body").append("svg")
	.attr("width", w)
	.attr("height", h)
	.attr("border", "1px solid")
	.append("g"); //uses SVG group element

 //1. Pie chart using d3.svg.arc
	var arc = d3.svg.arc()
			.innerRadius(40)
			.outerRadius(100)
		    .startAngle(function(d, i){return d.start;})
		    .endAngle(function(d, i){return d.start + d.size;})
			;

	var chart = d3.select("body").append("svg:svg")
			.attr("class", "chart")
			.attr("width", 420)
			.attr("height", 420).append("svg:g")
			.attr("transform", "translate(200,200)")
			;

	chart.selectAll("path")
			.data(data)
			.enter().append("svg:path")
			.style("fill", function(d, i){
				return d.color;
			})
			.attr("d", arc)
			;

//2. Pie chart layout manager

    var arc = d3.svg.arc()
    .outerRadius(100)
    .innerRadius(40);

    // set layout type, a lyout helper
    var pie = d3.layout.pie()
      .sort(null)
      // we want arc lengths in pie to be based on amount values
      .value(function(d) {
        return d.amount;
      })
      // .startAngle(Math.PI/2)
      // .endAngle(Math.PI*2.5)
      .padAngle(.02);


     var g = svg.selectAll(".arc")
    .data(pie(annualBudget)) // bind data to placeholders elements
  	.enter()
  	.append("g") // merge with group
    .attr("class", "arc") // assign class of .arc
	.style("fill", function(d,i){return d.data.colorCode;}) 
	//.style("fill", function(d,i){return randCol(i);}) // random color
	.attr("transform", "translate(100, 100)");

	g.append("path")
    .attr("d", arc);
		




// add shape primitives to svg container
//1.
// Area chart
// generate some curve data along x-axis
data = []; // clear current data
ptCount = 100;
var theta = 0.0;
for(var i=0; i<ptCount; i++){
	data.push({"x" : 200/ptCount*i, "y" : Math.cos(theta += Math.PI/16)*30});
}
var area = d3.svg.area()
	.x(function(d) { return d.x; })
	.y0(100)
	.y1(function(d) { return d.y; });

svg.append("path")
	.datum(data)
	.attr("d", area)
	.attr("fill", "hotpink")
	.attr("transform", "translate(800.0, 300)");

//11.
// Final Decoration
// add pretty boxes around all examples;
var offsets = [[0,0]];
var cols = 5, rows = 2;
var sz = 200;
for(var i=0; i<cols; i++){
	for(var j=0; j<rows; j++){
		offsets.push([i*sz, j*sz]);
	}
}

svg.selectAll("rect")
    .data(offsets)
    .enter()
    .append("rect")
	.attr("height", 200)
	.attr("width", 200)
	.style("stroke", "gray")
	.style("fill", "none")
	.style("stroke-width", 2)
	.attr('transform', translate);

function translate(d) {
		return "translate("+d[0]+", "+d[1]+")"
}

</script>

</body>
</html>